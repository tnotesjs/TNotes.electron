# [0022. å…¨å±€çº§åˆ«çš„å¿«æ·é”®](https://github.com/Tdahuyou/electron/tree/main/0022.%20%E5%85%A8%E5%B1%80%E7%BA%A7%E5%88%AB%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’](#3-)
- [4. ğŸ’» demo](#4--demo)
<!-- endregion:toc -->
## 1. ğŸ“ Summary
- å¦‚ä½•æ³¨å†Œå…¨å±€ï¼ˆç³»ç»Ÿï¼‰çº§åˆ«çš„å¿«æ·æ–¹å¼

## 2. ğŸ”— links

- https://www.electronjs.org/zh/docs/latest/api/global-shortcut
  - Electronï¼ŒæŸ¥çœ‹ globalShortcut æ¨¡å—çš„ç›¸å…³æè¿°ã€‚

## 3. ğŸ“’

- å…¨å±€çº§åˆ«çš„å¿«æ·é”®ï¼Œä¹Ÿç§°ç³»ç»Ÿçº§åˆ«çš„å¿«æ·é”®ï¼Œè¿™ç©æ„å„¿åœ¨å¾ˆå¤šæ¡Œé¢åº”ç”¨ç¨‹åºä¸­å¤šå¤šå°‘å°‘éƒ½ä¼šæœ‰ä¸€äº›ã€‚å¯¹äºä¸€äº›å¸¸ç”¨çš„æ“ä½œå’Œäº¤äº’è¡Œä¸ºï¼Œç»‘å®šå¥½å¿«æ·é”®ï¼Œè¿˜æ˜¯è›®å¿…è¦çš„ã€‚
- globalShortcut æ˜¯ä¸€ä¸ªä¸»è¿›ç¨‹ä¸­çš„æ¨¡å—ï¼Œå…¶ä½œç”¨æ˜¯ åœ¨åº”ç”¨ç¨‹åºæ²¡æœ‰é”®ç›˜ç„¦ç‚¹æ—¶ï¼Œç›‘å¬é”®ç›˜äº‹ä»¶ã€‚
- Qï¼šä»€ä¹ˆå«â€œåº”ç”¨ç¨‹åºæ²¡æœ‰é”®ç›˜ç„¦ç‚¹â€ï¼Ÿ
- Aï¼šå°±æ˜¯ä½ å½“å‰é¼ æ ‡ç‚¹å‡»çš„ä½ç½®å¹¶éè¯¥åº”ç”¨ï¼Œç„¦ç‚¹ä¸åœ¨è¿™ä¸ªåº”ç”¨èº«ä¸Šã€‚

## 4. ğŸ’» demo

```js
// index.js
const { globalShortcut, app, dialog } = require('electron')

app.on('ready', () => {
  // éœ€è¦æ³¨æ„ï¼Œåœ¨æ³¨å†Œå…¨å±€å¿«æ·é”®çš„æ—¶å€™ï¼Œéœ€è¦åœ¨ app æ¨¡å—çš„ ready äº‹ä»¶è§¦å‘ä¹‹å
  // ä½¿ç”¨ globalShortcut.register æ–¹æ³•æ³¨å†Œä¹‹åä¼šæœ‰ä¸€ä¸ªè¿”å›å€¼
  // è¿™ä¸ªè¿”å›å€¼æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœä¸º true åˆ™è¡¨ç¤ºæ³¨å†ŒæˆåŠŸï¼Œå¦åˆ™è¡¨ç¤ºæ³¨å†Œå¤±è´¥
  const ret = globalShortcut.register('ctrl+e', () => {
    dialog.showMessageBox({
      message: 'å…¨å±€å¿«æ·é”® ctrl+e è¢«è§¦å‘äº†',
      buttons: ['å¥½çš„'],
    })
  })

  // é€šè¿‡è¿”å›å€¼æ¥åˆ¤æ–­æ˜¯å¦æ³¨å†ŒæˆåŠŸ
  if (!ret) {
    console.error('æ³¨å†Œå¤±è´¥')
  } else {
    console.log('æ³¨å†ŒæˆåŠŸ')
  }

  console.log(
    // é€šè¿‡ isRegistered æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦æ³¨å†ŒæˆåŠŸ
    globalShortcut.isRegistered('ctrl+e')
      ? 'å…¨å±€å¿«æ·é”®æ³¨å†ŒæˆåŠŸ'
      : 'å…¨å±€å¿«æ·é”®æ³¨å†Œå¤±è´¥'
  )
})

// å½“æˆ‘ä»¬æ³¨å†Œäº†å…¨å±€å¿«æ·é”®ä¹‹åï¼Œå½“åº”ç”¨ç¨‹åºé€€å‡ºçš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦æ³¨é”€è¿™ä¸ªå¿«æ·é”®
app.on('will-quit', function () {
  globalShortcut.unregister('ctrl+e')
  // globalShortcut.unregisterAll()
})
```

- æ³¨å†Œå¿«æ·æ–¹å¼
  - `globalShortcut.register('ctrl+e', fn)` éœ€è¦åœ¨åº”ç”¨ ready ä¹‹åæ‰èƒ½æ³¨å†Œå…¨å±€å¿«æ·é”®ï¼Œæ³¨å†Œå¿«æ·é”®ä½¿ç”¨ `globalShortcut.register` è¿™ä¸ª API æ¥å®ç°æ³¨å†Œã€‚
- åˆ¤æ–­æ˜¯å¦æ³¨å†ŒæˆåŠŸ
  - `globalShortcut.register` çš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ª boolean å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ³¨å†ŒæˆåŠŸã€‚
- åˆ¤æ–­æŸä¸ªå¿«æ·æ–¹å¼æ˜¯å¦å·²ç»å®Œæˆæ³¨å†Œ
  - é€šè¿‡ `globalShortcut.isRegistered('ctrl+e')` å¯ä»¥æ£€æŸ¥æŸä¸ªå…¨å±€å¿«æ·é”®æ˜¯å¦å·²ç»è¢«æ³¨å†Œã€‚
- æ³¨é”€å¿«æ·æ–¹å¼
  - å½“åº”ç”¨é€€å‡ºçš„æ—¶å€™ï¼Œéœ€è¦æ³¨é”€æ‰€æ³¨å†Œçš„å…¨å±€å¿«æ·é”®ï¼Œä½¿ç”¨ `globalShortcut.unregister('ctrl+e')` æ³¨é”€æŒ‡å®šçš„å¿«æ·é”®ã€‚ä¹Ÿå¯ä»¥ç²—æš´ç‚¹å„¿ç›´æ¥ä½¿ç”¨ `globalShortcut.unregisterAll()` æŠŠæ‰€æœ‰å¿«æ·æ–¹å¼éƒ½ç»™æ³¨é”€ã€‚

**æœ€ç»ˆæ•ˆæœ**

- ä½¿ç”¨ `npm run dev` å¯åŠ¨åº”ç”¨åï¼Œä¼šåœ¨ç»ˆç«¯æ‰“å°ä¸€äº›é¢å¤–ä¿¡æ¯ï¼Œå¸®åŠ©ç†è§£ç¨‹åºçš„è¿è¡Œã€‚
  - ![](md-imgs/2024-10-06-01-53-29.png)
- æŒ‰ä¸‹ `ctrl + e` å³å¯è§¦å‘ç³»ç»Ÿå¼¹æ¡†ã€‚
  - ![](md-imgs/2024-10-06-01-53-48.png)
- éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ª demo å¹¶æ²¡æœ‰å®é™…çš„çª—å£ï¼Œä½†æ˜¯è¿™å¹¶ä¸å¦¨ç¢å…¨å±€å¿«æ·é”®çš„æ³¨å†Œã€‚